/* Do not edit this file to avoid losing your changes when upgrade the theme */
var BTFreBought={selectors:{selectedClass:"selected",checkbox:".pg__fre-check",variantSelect:".variant-id",pItem:".pg",frebItem:".freb__item",frebItemImage:".freb__item__image",frebMainImage:".freb__main-image",frebMainImageWrap:".freb__main-image-wrap",totalPrice:".freb__total-price",addBtn:".freb__add-btn",qtyBox:".qty-box__input--fre",wrap:".fre-bought"},updateTotalBox:function(e){var a=0,s=0,i=this,r=0;e.find(this.selectors.pItem+"."+this.selectors.selectedClass).each(function(){var e=$(this).find(i.selectors.variantSelect+" option:selected"),t=parseInt($(this).find(i.selectors.qtyBox).first().val());e.data("available")&&(a+=parseInt(e.data("price"))*t,s+=parseInt(e.data("compare-price"))*t,r++)}),e.find(this.selectors.totalPrice).html(this.getTotalPriceHtml(a,s)),0<r?e.find(this.selectors.addBtn).removeAttr("disabled"):e.find(this.selectors.addBtn).attr("disabled","disabled"),BT.convertCurrencySilence(e.find("span.money"))},getTotalPriceHtml:function(e,t){var a="";return e<t?(a+='<span class="product-price__price product-price__price--freb">'+BT.getPriceHtml(e)+"</span>",a+='<s class="product-price__price product-price__price--freb">'+BT.getPriceHtml(t)+"</s>"):a+='<span class="product-price__price product-price__price--freb">'+BT.getPriceHtml(e)+"</span>",a},init:function(){var i=this,r=this.selectors;$(r.checkbox).unbind("click"),$(r.checkbox).on("click",function(e){e.preventDefault(),$(this).closest(i.selectors.pItem).toggleClass(i.selectors.selectedClass),i.updateTotalBox($(this).closest(i.selectors.wrap))}),$(r.variantSelect).unbind("change"),$(r.variantSelect).on("change",function(){var e=$(this).val(),t=$(this).children('option[value="'+e+'"]'),a=$(this).closest(i.selectors.pItem);t.data("available")?a.find(i.selectors.checkbox).removeAttr("disabled"):a.find(i.selectors.checkbox).attr("disabled","disabled"),i.updateTotalBox(a.closest(i.selectors.wrap))}),$(r.addBtn).unbind("click"),$(r.addBtn).on("click",function(){var e=$(this).closest(i.selectors.wrap),s=[];e.find(i.selectors.pItem+"."+i.selectors.selectedClass).each(function(){var e=$(this).find(i.selectors.variantSelect+" option:selected"),t=$(this).find(i.selectors.qtyBox).first().val();if(e.data("available")){var a=e.attr("value");s.push({id:a,quantity:t})}}),BT.showLoadingFull(),BT.callAjax(theme.cartAddUrl,"post",{items:s},"json",function(){document.location.href=theme.cartUrl})}),$(document).on("change",this.selectors.qtyBox,function(){i.updateTotalBox($(this).closest(i.selectors.wrap))});var c=$(r.frebMainImage),l=$(r.frebMainImageWrap);$(document).on("mouseenter",this.selectors.frebItem,function(){c.hide();var e=$(this).find(r.frebItemImage),t=e.attr("data-image-id"),a=l.find(r.frebItemImage+'[data-image-id="'+t+'"]');if(0<a.length)a.show();else{var s=$('<div class="img-container '+r.frebItemImage.replace(".","")+' loading" style="'+e.attr("style")+'" data-image-id="'+e.attr("data-image-id")+'"></div>');s.html(e.html()),s.find("img").removeClass("lazyloaded").addClass("lazyload ignore-effect"),l.append(s)}}),$(document).on("mouseleave",this.selectors.frebItem,function(){var e=$(this).find(r.frebItemImage).attr("data-image-id"),t=l.find(r.frebItemImage+'[data-image-id="'+e+'"]');0<t.length&&t.hide(),c.show()}),BT.applyCustomColorSwatches(this.selectors.wrap)}};
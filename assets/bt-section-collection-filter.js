/* Do not edit this file to avoid losing your changes when upgrade the theme */
var BTCollectionFilter={selectors:{wrap:".cfs",item:".cfs__item",itemTitle:".cfs__item__title",input:".cfs__input",sectionContent:".section__content",dropdown:".cfs__dropdown",dropdownTrigger:".cfs__dropdown__trigger",dropdownTriggerTitle:".cfs__dropdown__title",dropdownTriggerValue:".cfs__dropdown__value",dropdownTriggerTitleTopClass:"cfs__dropdown__title--top",dropdownContent:".cfs__dropdown__content",btn:".cfs__btn"},renderData:function(n,o){n.addClass("rendering"),BT.showLoadingFull();var t=theme.collectionAllUrl;if(0<n.find("form").length){var e=new FormData(n.find("form").first()[0]);t+="?"+new URLSearchParams(e).toString()}BT.callAjax(t,"get",{view:"filter"},null,function(t){var e=$(this.selectors.sectionContent,t);n.find(this.selectors.sectionContent).html(e.html()),n.removeClass("rendering"),BT.hideLoadingFull(),o&&o()}.bind(this))},init:function(){var r=this,i="active";$(document).on("change",this.selectors.input,function(t){t.preventDefault();var e=$(this).parents(r.selectors.wrap).first();e.hasClass("rendering")||($(this).parents(r.selectors.item).first().nextAll().each(function(){$(this).find('input[type="radio"]').prop("checked",!1)}),r.renderData(e))}),$(document).on("click",this.selectors.dropdownTrigger,function(t){var e=$(this).parent(r.selectors.dropdown);e.hasClass(i)||e.addClass(i)}),$(document).on("click","body",function(t){0!=$(t.target).parents(r.selectors.dropdown).length||$(t.target).hasClass(r.selectors.btn.replace(".",""))||0<$(r.selectors.dropdown+"."+i).length&&$(r.selectors.dropdown+"."+i).removeClass(i)}),$(document).on("click",this.selectors.btn,function(t){t.preventDefault();var e=$(this).parents(r.selectors.wrap),n=e.first().find(r.selectors.item),o=!0;n.each(function(){if(0==$(this).find("."+r.selectors.dropdownTriggerTitleTopClass).length)return $(this).find(r.selectors.dropdown).addClass(i),void(o=!1)}),o&&e.find("form").first().submit()})}};BTCollectionFilter.init(),theme.collectionFilter={},theme.CollectionFilterSection=function(t){var e;this.wrap=$(t),e=this.wrap,BTCollectionFilter.renderData(e)},theme.CollectionFilterSection.prototype=_.assignIn({},theme.CollectionFilterSection.prototype,{onUnload:function(){delete this.wrap,delete this.content}}),theme.sections.constructors["collection-filter"]=theme.CollectionFilterSection;
/* Do not edit this file to avoid losing your changes when upgrade the theme */
$.extend(!0,BT,{initProductThumbsSlider:function(t){var i=this,e="",a=this.options.productGroup,o=this.selectors.productGroup;t&&(e=t+" "),0<$(e+o.thumbsSlider).length&&$(e+o.thumbsSlider).each(function(){var t={};$.extend(!0,t,a.smallSlider),$(this).hasClass(o.thumbsSliderVerticalClass)&&(t.vertical=!0,t.verticalSwiping=!0),t.prevArrow=$(this).siblings(".slick-prev"),t.nextArrow=$(this).siblings(".slick-next"),i.preInitSlider($(this),!0);$(this).slick(t),$(this).parents(o.wrap)})},destroyProductThumbsSlider:function(t){var i="",e=this.selectors.productGroup;t&&(i=t+" "),0<$(i+e.thumbsSlider).length&&$(i+e.thumbsSlider).each(function(){$(this).slick("unslick")})},pauseCurrentProductVideo:function(t){if(null!=this.data.productVideo.currentPlayer){t.find(this.selectors.mediaBtn).removeClass("hide");var i=this.data.productVideo.currentType;"youtube"==i&&this.data.productVideo.loadYoutubeApi?(this.data.productVideo.currentPlayer.pauseVideo(),$("#"+this.data.productVideo.currentYoutubePlayerId).parents(".youtube-wrapper").addClass("hide")):"vimeo"==i&&this.data.productVideo.loadVimeoApi?(this.data.productVideo.currentPlayer.pause(),$("#"+this.data.productVideo.currentVimeoPlayerId).parents(".vimeo-wrapper").addClass("hide")):this.data.productVideo.currentPlayer.pause(),this.data.productVideo.currentPlayer=null,this.data.productVideo.currentType=null}},playProductVideo:function(t,i){var e=this.selectors.productGroup,a=i.find(e.video);0<a.length&&(t.find(this.selectors.mediaBtn).addClass("hide"),a.hasClass(e.videoYoutube.replace(".",""))?this.loadCssJsLib("youtube",function(){if(this.data.productVideo.loadYoutubeApi)this.initYoutubePlayer(a);else var t=setInterval(function(){YT.loaded&&(clearInterval(t),this.data.productVideo.loadYoutubeApi=!0,this.initYoutubePlayer(a))}.bind(this),100)}.bind(this)):a.hasClass(e.videoVimeo.replace(".",""))?this.loadCssJsLib("vimeo",function(){this.data.productVideo.loadVimeoApi=!0,this.initVimeoPlayer(a)}.bind(this)):(this.data.productVideo.currentType="custom",this.data.productVideo.currentPlayer=a.get(0),this.data.productVideo.currentPlayer.play()))},initYoutubePlayer:function(t){var i=t.attr("data-player-id"),e=t.attr("data-video-id"),a=$("#"+i);a.parents(".youtube-wrapper").removeClass("hide"),t.css("opacity",0),this.data.productVideo.currentYoutubePlayerId=i,this.data.productVideo.currentType="youtube",a.hasClass("loaded")?YT.get(i).playVideo():(a.addClass("loaded"),new YT.Player(i,{height:"480",width:"100%",playerVars:{autohide:0,autoplay:1,branding:0,cc_load_policy:0,controls:1,fs:1,iv_load_policy:3,modestbranding:1,playsinline:0,quality:"hd720",rel:0,showinfo:0,wmode:"opaque"},videoId:e,events:{onReady:function(t){t.target.mute(),t.target.playVideo()}}})),this.data.productVideo.currentPlayer=YT.get(i)},initVimeoPlayer:function(t){var i=$("#"+t.attr("data-player-id")),e=i.attr("id");if(i.parents(".vimeo-wrapper").removeClass("hide"),this.data.productVideo.currentType="vimeo",this.data.productVideo.currentVimeoPlayerId=e,null==this.data.productVideo.vimeoPlayers[e]){i.removeClass("hide");var a=new Vimeo.Player(i.get(0),{width:800});a.setVolume(0),a.play(),this.data.productVideo.currentPlayer=a}else this.data.productVideo.currentPlayer=this.data.productVideo.vimeoPlayers[e],this.data.productVideo.currentPlayer.play()},play3dModel:function(t){t.hasClass("loaded")||(t.trigger("mediaVisible"),t.addClass("loaded"))},init3dModel:function(t,i){var e=$("[data-product-media-type-model]",t);e.length<1||theme.ProductModel.init(e,i)},initProductMainSliderAndZoom:function(t,i,e){var s=this,a="",o=this.options.productGroup,r=this.selectors.productGroup;if(t&&(a=t+" "),0<$(a+r.mainsSlider).length){var n=s.data.cacheWindowWidth<768?i:e;setTimeout(function(){$(a+r.mainsSlider).each(function(){var t={};$.extend(!0,t,o.mainSlider),s.preInitSlider($(this),!0);var n=$(this).slick(t),d=$(this).parents(r.wrap);s.playProductVideo(d,n.find(".slick-current")),s.initProductMainZoom(d),n.on("afterChange",function(t,i,e,a){var o=i.$slider.find(".slick-current "+r.mainLink);0<d.find(r.thumbs).length&&d.find(r.thumbs).find(r.thumb+":not(slick-clone) "+r.thumbLink+'[data-image-id="'+o.attr("data-image-id")+'"]').trigger("click",!0);s.initProductMainZoom(d),s.pauseCurrentProductVideo(d),s.playProductVideo(d,i.$slider.find(".slick-current")),o.hasClass(r.mainLinkModel.replace(".",""))?(s.play3dModel(o),n.slick("slickSetOption","swipe",!1,!1),n.addClass("play-model")):n.hasClass("play-model")&&(n.slick("slickSetOption","swipe",!0,!1),n.removeClass("play-model")),o.hasClass(r.ignoreLightBoxClass)?n.addClass("no-light-box-icon"):n.removeClass("no-light-box-icon")})})}.bind(this),n)}else s.initProductMainZoom($(a+r.wrap))},destroyProductMainSliderAndZoom:function(t){var i=this,e="",a=this.selectors.productGroup;t&&(e=t+" "),0<$(e+a.mainsSlider).length&&$(e+a.mainsSlider).each(function(){$(this).slick("unslick");var t=$(this).parents(a.wrap);i.destroyProductMainZoom(t)})},destroyZoom:function(t,i,e){1==e?null!=this.data.zoom[t]&&(this.data.zoom[t].closeZoom(),this.data.zoom[t].destroy(),this.data.zoom[t]=void 0):"object"==typeof this.data.zoom[t]&&null!=this.data.zoom[t]&&null!=this.data.zoom[t][i]&&(this.data.zoom[t][i].closeZoom(),this.data.zoom[t][i].destroy(),this.data.zoom[t][i]=void 0)},initZoom:function(t,i,e,a,o){1==a?(1==o&&null==this.data.zoom[i]||0==o)&&(this.data.zoom[i]=new CloudZoom(t,this.options.productZoom)):(null==this.data.zoom[i]&&(this.data.zoom[i]={}),(1==o&&null==this.data.zoom[i][e]||0==o)&&(this.data.zoom[i][e]=new CloudZoom(t,this.options.productZoom)))},initProductMainZoom:function(t){if(!(this.data.cacheWindowWidth<1200)){var i=this.selectors.productGroup,e=this,a=t.attr("data-zoom-scope"),o=t.find(i.main+" "+i.imgZoom).length;0<o&&null!=a&&new Promise(function(t,i){e.loadCssJsLib("zoom",t)}).then(function(){t.find(i.main+" "+i.imgZoom).each(function(){var i=$(this);setTimeout(function(){var t=i.parent().attr("data-image-id");e.data.cacheWindowWidth>e.options.windowScreen.mobile&&(e.destroyZoom(a,t,o),e.initZoom(i,a,t,o,!1)),$(window).on(e.data.resizeEventName,function(){e.data.cacheWindowWidth>e.options.windowScreen.mobile?e.initZoom(i,a,t,o,!0):e.destroyZoom(a,t,o)})},1e3)})},function(t){})}},destroyProductMainZoom:function(t){if(!(this.data.cacheWindowWidth<1200)){var i=this.selectors.productGroup,e=t.attr("data-zoom-scope"),a=t.find(i.main+".slick-current "+i.imgZoom).length;0<a&&null!=e&&this.data.cacheWindowWidth>this.options.windowScreen.mobile&&this.destroyZoom(e,imageId,a)}},changeMainImage:function(a,o){var n=this.selectors.productGroup,d=this;a.find(n.mainImg).each(function(){var t,i=$(this),e=i.attr("data-image-size");t=null!=e?d.resizeImage(o,e).replace("_1x1.","_{width}x."):o,i.parent(":not(.not-loading)").addClass("loading"),i.attr("data-src",t),i.addClass("lazyload"),a.removeClass(n.loadingClass)})},updateMainThumbnail:function(t,i,e,a){var o,n=this.selectors.productGroup,d=t.find(n.mains);if(0<d.length){var s;if(s=null!=a?t.find(n.mainLink+'[data-image-id="'+a+'"]'):t.find(n.mainLink+'[data-image-id="'+i.attr("data-image-id")+'"]'),d.hasClass(n.mainsSlider.replace(".","")))o=s.parents(".slick-slide").first().attr("data-slick-index"),this.gotoSliderIndex(t.find(n.mainsSlider),o);else if(d.hasClass("scroll-main-hoz")){var r=(l=s.parent()).offset().left+d.scrollLeft()-d.offset().left;d.animate({scrollLeft:r+"px"})}else if(d.hasClass("scroll-main-ver")){var l;if(!(l=s.parent()).hasClass("active")){if(l.siblings(".active").removeClass("active"),992<this.data.cacheWindowWidth)$("body,html").animate({scrollTop:l.offset().top+"px"},800);else{r=l.offset().left+d.scrollLeft()-d.offset().left;d.animate({scrollLeft:r+"px"})}l.addClass("active")}}else if(null==i||0==i.length){if(null==e)return;this.changeMainImage(t,e)}else this.changeMainImage(t,i.attr("href"))}else{if(null==e)return;this.changeMainImage(t,e)}},updateStorePickup:function(e,t){var a=this.selectors.productGroup,o=e.find(a.storePickupWrap);if(0<o.length)if(t.available){o.addClass("loading-store-data");var i=theme.rootUrl+"variants/"+t.id;this.callAjax(i,"get",{section_id:"store-availability"},null,function(t){var i=$(".store-availability-information",t);0<i.length?(o.find(a.storePickupInner).html(i[0].outerHTML),$("body").find(a.storePickupModel).remove(),$("body").append($(a.storePickupModel,t)),$(a.storePickupProductTitle).text(e.find(".product-single__title").text()),o.hasClass("hide-default-title")&&$(a.storePickupVariantTitle).hide(),o.removeClass("hide")):o.addClass("hide"),o.removeClass("loading-store-data")})}else o.addClass("hide")},updateNewVariant:function(t,o,n,d,i,e,a){var s=this.selectors.productGroup,r=(this.options.productGroup,this);t.find(s.price).html(this.getVariantPriceHtml(t,o)),t.find(s.stickySmallPrice).html(this.getPriceHtml(o.price)),this.convertCurrencySilence(t.find("span.money")),this.updateStorePickup(t,o);var l,c,u=BT.data.outStockGroup[t.attr("data-product-handle")],h=!a&&null!=u,p=[];o.options.length;if(o){h&&t.find(s.option+".last "+s.optionValue).removeClass(s.swatchOutStock),t.find(s.option+".last  option").removeAttr("disabled");for(var f=0;f<o.options.length-1;f++)p.push(o.options[f])}(t.find(s.option).each(function(){var e=$(this).attr("data-index"),t=$(this).hasClass("swatch"),a=$(this).hasClass("last");t?($(this).find(".selected,.hide").removeClass("selected hide"),$(this).find(s.optionValue).each(function(){if($(this).attr("data-value")==o.options[e]&&$(this).addClass("selected"),(1==e&&-1==n.indexOf($(this).attr("data-value"))||2==e&&-1==d.indexOf($(this).attr("data-value")))&&$(this).addClass("hide"),a&&h){p.push($(this).attr("data-value"));var t=p.join(" / ");-1<u.indexOf(t)&&$(this).addClass(s.swatchOutStock),p.pop()}})):$(this).find(s.optionValue).each(function(){var i;0<e&&(1==e?i=n:2==e&&(i=d),$(this).find("option").each(function(){if($(this).removeClass("hide").removeAttr("selected").removeAttr("disabled"),-1==i.indexOf($(this).attr("value"))&&$(this).addClass("hide").attr("disabled","disabled"),a&&h){p.push($(this).attr("value"));var t=p.join(" / ");-1<u.indexOf(t)&&$(this).attr("disabled","disabled"),p.pop()}}));$(this).val(o.options[e])})}),o.available)?((c=t.find(s.cartBtn)).removeAttr("disabled"),c.removeClass("soldout"),l=theme.preOrder&&"continue"==o.inventory_policy&&o.inventory_quantity<=0?theme.strings.preOrderText:theme.strings.addToCart,c.attr("title",l),"tooltip"==c.attr("data-toggle")&&c.tooltip("fixTitle"),c.find("span").text(l),t.find(s.stockText).text(theme.strings.instockText).removeClass("soldout")):((c=t.find(s.cartBtn)).attr("disabled","disabled"),c.addClass("soldout"),c.attr("title",theme.strings.soldOut),"tooltip"==c.attr("data-toggle")&&c.tooltip("fixTitle"),c.find("span").text(theme.strings.soldOut),t.find(s.stockText).text(theme.strings.soldOut).addClass("soldout"));t.find(s.variantId).val(o.id),t.find(s.variantId).trigger("change"),0<t.find(s.variantTitle).length&&t.find(s.variantTitle).text(o.title);var m=t.find(s.thumbLink+'[data-image-id="'+o.featured_media.id+'"]');if(i&&this.updateMainThumbnail(t,m,o.featured_media.src,o.featured_media.id),null!=t.attr("data-history")){var v=window.location.href.split("?"),g=v[0]+"?";1<v.length&&v[1]?-1<v[1].indexOf("variant")?g+=v[1].replace(/(variant=).*?(&|$)/,"$1"+o.id+"$2"):g+=v[1]+"&variant="+o.id:g+="variant="+o.id,window.history.replaceState({path:g},"",g)}if(0<t.find(s.labelDeal).length){var y=t.find(s.labelDeal);if(o.compare_at_price&&o.compare_at_price>o.price){if(y.removeClass("hide"),0<y.find(s.labelPercent).length){var C=Math.floor((o.compare_at_price-o.price)/o.compare_at_price*100);y.find(s.labelPercent).html(C+"%")}}else y.addClass("hide")}var w,b=t.find(s.singleProgress);if(0<b.length)if(o.available)if(w=null!=b.attr("data-min")&&null!=b.attr("data-max")?this.getRandomIntInclusive(parseInt(b.attr("data-min")),parseInt(b.attr("data-max"))):o.inventory_quantity,threshold=parseInt(b.attr("data-threshold")),w>threshold)b.addClass("hide");else{b.removeClass("hide");var x=b.find(".progress-bar");0<w?(b.find(s.stockText1).removeClass("hide"),b.find(s.stockText2).addClass("hide"),x.css("width",x.attr("aria-valuenow")+"%")):(b.find(s.stockText2).removeClass("hide"),b.find(s.stockText1).addClass("hide"),x.css("width","99%")),b.find(s.stockNumber).text(o.inventory_quantity)}else b.addClass("hide");if(0<t.find(s.syncUrl).length){var P=t.find(s.syncUrl).attr("href").split("?")[0]+"?variant="+o.id;t.find(s.syncUrl).attr("href",P)}var V=t.find(s.sku);0<V.length&&(o.sku?(V.text(o.sku),V.parent().removeClass("hide")):V.parent().addClass("hide")),null!=t.attr("data-sync-pg")&&e&&$(t.attr("data-sync-pg")).each(function(){$(this).find(s.groupData).attr("data-value",t.find(s.groupData).attr("data-value")),r.updateNewVariant($(this),o,n,d,!0,!1,a)})},getRandomIntInclusive:function(t,i){return t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1)+t)},initMainLightboxGallery:function(){var e=this.selectors.productGroup,a=this;$(document).on("click",e.mainLink,function(t){if(!$(this).hasClass(e.ignoreLightBoxClass)){t.preventDefault();var i=$(this).siblings(a.selectors.mediaBtn);0<i.length?i.trigger("click",[$(this).attr("data-image-id")]):$(this).parents(e.wrap).find(a.selectors.mediaBtn).trigger("click",[$(this).attr("data-image-id")])}})},openLightboxByPhotoswipe:function(t,o){var n=this,d=this.selectors.productGroup;if(0<t.find(d.mainLink).length){var s=[],r=0,l=0;t.find(d.mainLink+":not(.hide)").each(function(t,i){if(!$(this).hasClass(d.ignoreLightBoxClass)){var e=$(this),a=e.attr("title");a=a&&a.replace(/ group-(.*?) /g," ").replace(/group-(.*?) /g,"").split("group")[0],null!=o?$(this).attr("data-image-id")==o&&(r=l):$(this).parent().hasClass("active")&&(r=l),s.push({src:e.attr("href"),w:e.attr("data-width"),h:e.attr("data-height"),msrc:n.resizeImage(e.attr("href"),"96x"),title:a,el:e.parent()[0]}),l++}});var i=document.querySelectorAll(".pswp")[0],e={index:r,getThumbBoundsFn:function(t){var i=s[t].el.getElementsByTagName("img")[0],e=window.pageYOffset||document.documentElement.scrollTop,a=i.getBoundingClientRect();return{x:a.left,y:a.top+e,w:a.width}},shareButtons:[]};new PhotoSwipe(i,PhotoSwipeUI_Default,s,e).init()}},openLightboxByLightGallery:function(i,o){var n=this,d=this.selectors.productGroup;if(0<i.find(d.mainLink).length){var s=[],r=0,l=0;i.find(d.mainLink+":not(.hide)").each(function(t,i){if(!$(this).hasClass(d.ignoreLightBoxClass)){var e=$(this),a=e.attr("title");a=a&&a.replace(/ group-(.*?) /g," ").replace(/group-(.*?) /g,"").split("group")[0],null!=o?$(this).attr("data-image-id")==o&&(r=l):$(this).parent().hasClass("active")&&(r=l),s.push({src:e.attr("href"),thumb:n.resizeImage(e.attr("href"),"96x"),subHtml:a}),l++}}),rtl&&(s.reverse(),r=l-r-1),i.data("lightGallery")&&i.off("onCloseAfter.lg"),i.lightGallery({dynamic:!0,dynamicEl:s,index:r,download:!1}),i.on("onCloseAfter.lg",function(t){setTimeout(function(){void 0!==i.data("lightGallery")&&i.data("lightGallery").destroy(!0)},300)})}},initMediaButton:function(){var o=this,n=this.selectors.productGroup,d=!1;$(document).on("click",this.selectors.mediaBtn,function(t,i){if(t.preventDefault(),!d){var e=$(this).parents(n.wrap),a=$(this);null==i&&(i=null!=a.attr("data-media-id")?a.attr("data-media-id"):e.find(n.mainsSlider+" .slick-current "+n.mainLink).attr("data-image-id")),d=!0,o.startLoadingBtn(a),o.showLoadingFull(),BT.data.cacheWindowWidth<1200?o.loadSnippetAjax("photoswipe",function(){o.loadCssJsLib("photoswipe",function(){setTimeout(function(){o.endLoadingBtn(a),o.hideLoadingFull(),o.openLightboxByPhotoswipe(e,i),d=!1},400)})},300):o.loadCssJsLib("lightgallery",function(){o.endLoadingBtn(a),o.hideLoadingFull(),o.openLightboxByLightGallery(e,i),d=!1})}})},initProductGlobal:function(){this.initMediaButton(),this.initMainLightboxGallery();var f=this.selectors.productGroup,m=(this.options.productGroup,this);$(document).on("click",f.thumbLink,function(t,i){if(t.preventDefault(),!$(this).parent().hasClass("active")){var l=$(this),c=l.attr("data-image-id"),u=l.parents(f.wrap),h=!1;if(null!=t.originalEvent&&(h=!0),l.parent().addClass("active").siblings(".active").removeClass("active"),0<u.find(f.option).length){var p=u.attr("data-product-handle");new Promise(function(i,t){null==m.data.productGroup[p]?(u.addClass(f.loadingClass),m.callAjax(theme.rootUrl+"products/"+p,"get",{view:"tjson"},null,function(t){m.data.productGroup[p]=$.parseJSON(t.replace("\x3c!-- BEGIN template --\x3e","").replace("\x3c!-- product.tjson --\x3e","").replace("\x3c!-- END template --\x3e","")),u.removeClass(f.loadingClass),i()})):i()}).then(function(){var a,o,e=[],n=[],d=0,s=[];if(u.find(f.option).each(function(){var t;$(this).attr("data-index");t=$(this).hasClass("swatch")?$(this).find(".selected").attr("data-value"):$(this).find(f.optionValue).val(),s.push(t)}),$.each(m.data.productGroup[p],function(t,i){if(i.featured_media.id==c){a=i;var e=0;$.each(i.options,function(t,i){s[t]==i&&(e+=3-t)}),d<e&&(o=i,d=e)}}),null!=o&&(a=o),null!=a){var r=(s=a.options).length;$.each(m.data.productGroup[p],function(t,i){i.options[0]==s[0]&&1<r&&-1==e.indexOf(i.options[1])&&e.push(i.options[1]),1<r&&i.options[0]==s[0]&&i.options[1]==s[1]&&2<r&&-1==n.indexOf(i.options[2])&&n.push(i.options[2])}),(h||i)&&m.updateNewVariant(u,a,e,n,h,!0,!1)}else h&&(l.hasClass("loaded")||(l.addClass("loaded"),u.addClass(f.loadingClass)),m.updateMainThumbnail(u,l))},function(t){})}else h&&m.updateMainThumbnail(u,l)}})}}),BT.initProductGlobal(),theme.ProductModel=function(){var o={},s={},r={},l="[data-product-single-media-group]",c="[data-shopify-xr]";function n(t){if(!t)if(window.ShopifyXR){for(var i in o)if(o.hasOwnProperty(i)){var e=o[i];if(e.loaded)continue;var a=$("#ModelJson-"+i);window.ShopifyXR.addModels(JSON.parse(a.html())),e.loaded=!0}window.ShopifyXR.setupXRElements()}else document.addEventListener("shopify_xr_initialized",function(){n()})}function i(t){if(!t)for(var i in s)if(s.hasOwnProperty(i)){var e=s[i];e.modelViewerUi||(e.modelViewerUi=new Shopify.ModelViewerUI(e.$element)),a(e)}}function a(t){var i=r[t.sectionId];t.$container.on("mediaVisible",function(){i.$element.attr("data-shopify-model3d-id",t.modelId),BT.data.isTouchDevide||t.modelViewerUi.play()}),t.$container.on("mediaHidden",function(){i.$element.attr("data-shopify-model3d-id",i.defaultId),t.modelViewerUi.pause()}).on("xrLaunch",function(){t.modelViewerUi.pause()})}return{init:function(t,d){o[d]={loaded:!1},t.each(function(t){var i=$(this),e=i.data("media-id"),a=$(i.find("model-viewer")[0]),o=a.data("model-id");if(0===t){var n=i.closest(l).find(c);r[d]={$element:n,defaultId:o}}s[e]={modelId:o,sectionId:d,$container:i,$element:a}}),window.Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:n},{name:"model-viewer-ui",version:"1.0",onLoad:i}]),BT.loadCssJsLib("modelViewerUiStyles")},removeSectionModels:function(t){for(var i in s){if(s.hasOwnProperty(i))s[i].sectionId===t&&(s[i].modelViewerUi.destroy(),delete s[i])}delete o[t]}}}();
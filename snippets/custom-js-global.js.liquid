{%- comment -%}
	Custom JS code which is used in ALL pages in shop
{%- endcomment -%}
<script>
   
  {%- comment -%}
  /* toggle search input content on mobile with plain js clicking search icon */
  var ready = (callback) => {
    if (document.readyState != "loading") callback();
    else document.addEventListener("DOMContentLoaded", callback);
  }

  ready(() => {
    var searchIcon = document.querySelector('.header .mobile_search_icon');
    var searchDropdownContent = document.querySelector('.mobile_search_dropdown');
	searchDropdownContent.classList.add('hide');
    searchIcon.addEventListener("click", (e) => {
      if (searchDropdownContent.classList.contains("show")) {
        searchDropdownContent.classList.replace("show", "hide");
      } else if (searchDropdownContent.classList.contains("hide")) {
        searchDropdownContent.classList.replace("hide", "show");
      }
    }); 
  });
  {%- endcomment -%}

/* Create H1 tag if no H1 tag */
if(!document.querySelector('h1')) {
  let metaTitle = document.querySelector('meta[property="og:title"]').content;
  let h = document.createElement("H1"); // Create the H1 element 
  let t = document.createTextNode(metaTitle); // Create a text element 
  h.appendChild(t).className = 'hidden'; // Append the text node to the H1 element
  h.className = 'hidden'; 
  document.body.prepend(h); // Append the H1 element to the document body 
}

// make SHOP button text clickable in mobile menu
  setInterval(function(){ 
    let link = $(".mobile-nav__item__top-link");
    if(link.length){
      link.off("click");
      link.click(function(e) {
        const arrowButton = $(this).next();
        if (arrowButton.length) {
          if(arrowButton.hasClass("hide") == false){
            e.preventDefault(); 
            arrowButton.click();
          }
        }
      });
    }
  }, 1000);
</script>